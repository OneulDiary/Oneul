<!DOCTYPE html>
<html 
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="/inc/layout"
	lang='ko'>
	
  <head>
    <meta charset='UTF-8' />
    <link href='/css/calendar/calendar.css' rel='stylesheet' />
    <script src='/js/calendar/calendar.js'></script>
    <style type="text/css">
    	#calendar {
	    	padding: 0px;
	        max-width: 450px;
	        height: 460px;
	        margin: auto auto;
	        margin-top: 10px;
    	}
		
		.happy, .proud, .flutter, .calm, .sensitive, .unstable, .tired, .sad, .upset {
		    width: 5em;
		    height: 5em;
		    margin-left: auto;
		    margin-right: auto;
	    }
	    
	    .d-none{
	    	display: none;
	    }
	    
	    .diary-container{
			display:grid;
			height:70px;
			width:90%;
			padding:5px;
			background-color: white;
			border-radius: 8px;
		    align-items: center;
		    margin: 10px auto 10px auto;
		    grid-template-columns: 80px 1fr;/*열 두개*/
		    grid-template-rows: 1fr;/*행 3층*/
			grid-template-areas:
			  "emotion content";
		}
	    .emotion-container{
			grid-area: emotion;
		}
	
		.content{
			grid-area: content;
		}
    </style>
    <script>
    
      var jsonString ="[[${jsonString}]]";
      
      if( jsonString == "" ) {
    	  jsonString = "[]";
      } else {
    	  jsonString = jsonString.replace(/&quot;/g, "\"");
      }
      var eventList = JSON.parse(jsonString);
      
      var calendar = null;
     
      document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var diaryContainer = document.querySelector(".diary-container"); 
        
        calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'dayGridMonth',
       	  editable: true,
          selectable: true,
          businessHours: true,
          dayMaxEvents: true,
          	
      	  events:eventList,
      	
      	  eventClick:function(event){
      		console.log("test");
      		diaryContainer.classList.toggle("d-none");
      	  }
      	  
        });
        calendar.render();
        
        
      });
      
       
    </script>
  </head>
  <main id="main" layout:fragment="main">
    <div id='calendar'></div>

	<div class='d-none diary-container'>
		<div>감사일기</div>
		<div class="emotion-container">
			<div class="happy"></div>
		</div>
		
		<div class='content'>오늘의 감사한 일 : 맛있는 음식을 먹었다</div>
		
	</div>


</main>
</html>
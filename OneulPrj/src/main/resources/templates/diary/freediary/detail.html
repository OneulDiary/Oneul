<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="/inc/layout">
<head>
<meta charset="UTF-8">
<script src='/js/diary/freediary/detail.js'></script>
<title>자유일기-상세페이지</title>
</head>
<main id="main" layout:fragment="main">

	<section class="sectionClass">
		<table border="1">
			<tr>
					<th>오늘의 감정</th>
					<!-- <td id="emotion" colspan="3" th:text="${gratitudeDiary.emotionId}"> -->
					<td colspan="3">
						<div class="div" th:classappend="${freeDiary.emotionId} =='1' ? 'happy'"></div>
						<div class="div" th:classappend="${freeDiary.emotionId} =='2' ? 'proud'"></div>
						<div class="div" th:classappend="${freeDiary.emotionId} =='3' ? 'flutter'"></div>
						<div class="div" th:classappend="${freeDiary.emotionId} =='4' ? 'calm'"></div>
						<div class="div" th:classappend="${freeDiary.emotionId} =='5' ? 'sensitive'"></div>
						<div class="div" th:classappend="${freeDiary.emotionId} =='6' ? 'unstable'"></div>
						<div class="div" th:classappend="${freeDiary.emotionId} =='7' ? 'tired'"></div>
						<div class="div" th:classappend="${freeDiary.emotionId} =='8' ? 'sad'"></div>
						<div class="div" th:classappend="${freeDiary.emotionId} =='9' ? 'upset'"></div>
					</td>
			</tr>
			<tr>
				<th>첨부파일</th>
				<td colspan="3">
				<img style="width:300px;"th:src="@{'/upload/'+ ${freeDiary.image}} " th:if="${freeDiary.image}!=''" >
				</td>
			</tr>
			<tr>
				<th>작성일</th>
				<td colspan="3" th:text="${freeDiary.regDate}"></td>
			</tr>
			<tr th:with="pub = ${freeDiary.pub}==false?'비공개':'공개'">
				<th>공개선택</th>
				<td colspan="3" th:text="${pub}">공개 / 비공개</td>
			</tr>
			<tr>
				<td colspan="4" th:text="${freeDiary.content}"></td>
			</tr>
		</table>

		<div>
			<a href="list">목록</a> <a th:href="@{edit(id=${freeDiary.id})}">수정</a>
			<a th:href="@{del(id=${freeDiary.id})}"
				onclick="if(!confirm('정말 삭제하시겠습니까?')) return false;">삭제</a>
		</div>

		<div class="container">
			<form id="commentForm" action=""name="commentReg" method="post">
				<input type="hidden" name="id" th:value="${freeDiary.id}"> <br>
				<br>
				<div>
					<div>
						<span><strong>Comments</strong></span> <span id="cCnt"></span>
					</div>
					<div>
						<table class="table">
							<tr>
								<td><textarea style="width: 500px" rows="3" cols="30"
										name="content" placeholder="댓글을 입력하세요"></textarea> <br>
									<div>
										<input type="submit" value="저장">
									</div></td>
							</tr>
						</table>
					</div>
				</div>
			</form>
		</div>
		<!-- container -->
		<!-- 댓글목록 -->
 		<div id="reply">
			<ol>
			<li th:each="n:${commentList}">
				<p th:text="${n.userId}"></p>
				<p th:text="${n.regDate}"></p>
				<p th:text="${n.content}"></p>
				<a th:href="@{edit(id=${nc.id})}">답글</a>
				<a th:href="@{edit(id=${n.id})}">수정</a>
				<a id ="commentDelBtn" 
					th:href="@{commentdel(id=${n.id},freeDiaryId=${param.id})}"
					onclick="if(!confirm('정말 삭제하시겠습니까?')) return false;">삭제</a>
				<ul th:if="${n.list!=null}">
					<li style="margin-left:30px;" th:each="nc:${n.list}">
						<p th:text="${nc.userId}"></p>
						<p th:text="${nc.regDate}"></p>
						<p th:text="${nc.content}"></p>
						<a th:href="@{edit(id=${nc.id})}">수정</a>
						<a id ="commentDelBtn" 
							th:href="@{commentdel(id=${nc.id},freeDiaryId=${param.id})}"
							onclick="if(!confirm('정말 삭제하시겠습니까?')) return false;">삭제</a>
					</li>
				</ul>
			</li>
			</ol>
		</div>
	</section>
	
	<section class="editComment">
		<div id="modal" class="modal" th:fragment="modal">
		<!-- Modal content -->
	
		</div>
	</section>
</main>
</html>